
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-19801227-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Functions &mdash; RuleBender</title>
    <link rel="stylesheet" href="../../_static/css/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootswatch-united.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rbdocs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/js/jquery-2.0.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/js/zeroclipboard.min.js"></script>
    <script type="text/javascript" src="../../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/js/rbdocs.js"></script>
    <link rel="shortcut icon" href="../../_static/bionetgen.ico"/>

  </head>
  <body data-spy="scroll" data-target="#localtoc" data-offset="190">

<div class="container">
  <div class="row">
    <div class="span12">
      <a href="../../index.html">
        <img src="../../_static/bionetgen_logo.png" alt="BNG logo" id="logo" />
      </a>
    </div>
    <div class="span12">
      <div class="subnav">
        <ul class="nav nav-pills">
        <li class="pull-right">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
        <li><a href="../../index.html">Home  &raquo;</a></li> 
        </ul>
      </div>
    </div>
  </div>

  <div class="content">
  <div class="row">
    <div class="span3">
      <div id="sidebar" style="width: 220px">
        <div class="accordion" id="accordion2">
  <div id="searchbox" class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseToolbox">
        <strong>Toolbox</strong>
      </a>
    </div>
    <div id="collapseToolbox" class="accordion-body collapse in">
      <div class="accordion-inner">
        <div id="showcodebuttons" style="margin-bottom: 10px">
          <p><small>Show code snippets for copying:</small></p>
          <div class="btn-group">
            <a href="#codemodal" role="button" data-toggle="modal" id="showcode" class="btn btn-primary btn-small">
              <i class="icon-fullscreen icon-white"></i> Show code</a>
            <a href="#codemodal" role="button" data-toggle="modal" id="withcomments" class="btn btn-primary btn-small">
              and output <i class="icon-comment icon-white"></i> </a>
          </div>
        </div>

        <p><small>Search terms or function by name:</small></p>
        <form class="form-search pull-right" action="../../search.html" method="get">
          <div class="input-append">
            <input type="text" class="input-small search-query" name="q" class="span2">
            <button type="submit" class="btn btn-primary">Go</button>
          </div>
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
      </div>
    </div>
  </div>  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseReleaseNotes">
        <strong>Release Notes</strong>
      </a>
    </div>
    <div id="collapseReleaseNotes" class="accordion-body collapse in">
      <div class="accordion-inner">
        <p><small><strong>v1</strong> series come with new and improved sequence, structure, and dynamics analysis
features. See <a href="../../manual/release/index.html">release notes</a> for details.
        </small></p>
      </div>
    </div>
  </div>  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseHowToCite">
        <strong>How to Cite</strong>
      </a>
    </div>
    <div id="collapseHowToCite" class="accordion-body collapse in">
      <div class="accordion-inner">
                      <p>
                <small>
                  <strong>BioNetGen</strong> <br>
                  J. R. Faeder, M. L. Blinov, and W. S. Hlavacek (2009) <a href="http://www.ncbi.nlm.nih.gov/pubmed/19399430/">Rule-based modeling of biochemical systems with BioNetGen</a>, <i>Methods Mol. Biol.</i>, <strong>500</strong>, 113-67. <br> 
                 </small>
              </p>  
              <p>
                <small>
                 <strong>RuleBender</strong> <br>
                  A. M. Smith, W. Xu, Y. Sun, J. R. Faeder and G. E. Marai (2012) <a href="http://bmcbioinformatics.biomedcentral.com:80/articles/10.1186/1471-2105-13-S8-S3">RuleBender: integrated modeling, simulation and visualization for rule-based intracellular biochemistry</a>, <i>BMC Bioinformatics</i>, <strong>13</strong>(suppl. 8), S3 (16 pages). <br>
                </small>
              </p>  
              <p>
                <small>
                  <strong>NFsim</strong> <br>
                  M. W. Sneddon, J. R. Faeder and T. Emonet (2012) <a href="https://www.ncbi.nlm.nih.gov/pubmed/21186362">Efficient modeling, simulation and coarse-graining of biological complexity with NFsim.</a>, <i>Nat. Methods</i>, <strong>8</strong>, 177-183. 
                </small>
              </p>
      </div>
    </div>
  </div>
        </div>
      </div>
    </div>
    <div class="span9 body">
    
  <div class="section" id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h1>
<p>In BioNetGen 2.2.0, the functions block was introduced to allow for the definition of arbitrary mathematical formulas for rate laws. The syntax of a line in the functions block is</p>
<blockquote>
<div>[label:] functionName([argument1,argument2,...]) [=] functionDef</div></blockquote>
<p>where functionName is a valid BioNetGen object name (see Note 6), each optional argument is a reference (tag) to a molecule or complex (see BNGManual:Tags), and functionDef is a mathematical expression involving numbers, built-in operators and functions, parameters, observables and, if applicable, the function arguments. If a function is defined with arguments, these must be passed as arguments to observables in the function expression, where they act as the scope over which the observable is calculated. Functions with arguments are thus referred to as local functions because they are calculated over a restricted subset of the molecules in the system. Conversely, functions without arguments are referred to as global functions since they are evaluated over the entire simulation domain.</p>
<p>An example illustrating the use of both global and local functions is given in BNGManual:Model 4. This simple model of gene expression is comprised of a single DNA molecule, mRNA transcripts, and proteins. The system is self-amplifying in that the rate of promoter activation increases with increasing amount of protein in the system. In the molecule types block, the DNA molecule is modeled as having a single promoter component, which can be in an inactive (&#8216;0&#8217;) or active (&#8216;1&#8217;) state, and three identical protein-binding sites,</p>
<blockquote>
<div>DNA(prot,prot,prot,promoter~0~1) .</div></blockquote>
<p>mRNA transcripts are modeled as unstructured species,</p>
<blockquote>
<div>mRNA() ,</div></blockquote>
<p>and proteins are modeled as having a single promoter-binding site,</p>
<blockquote>
<div>Protein(dna) .</div></blockquote>
<p>In the reaction rules block, rules are defined for DNA-protein binding/unbinding, promoter activation/deactivation, mRNA transcription, protein translation, and mRNA and protein degradation. Protein binding and unbinding at each prot site on the DNA molecule is assumed to occur independently with equal rate,</p>
<blockquote>
<div>DNA(prot) + Protein(dna) &lt;-&gt; DNA(prot!0).Protein(dna!0) kp, km .</div></blockquote>
<p>However, the rate (probability) of promoter activation is assumed to depend strongly on the number of bound proteins, which is quantified in the observables block as</p>
<blockquote>
<div>Molecules DNA_Prot DNA(prot!0).Protein(dna!0)  .</div></blockquote>
<p>The rate of promoter activation is then defined in the functions block as</p>
<blockquote>
<div>DNA_activation(x) = 0.01 + k_act*DNA_Prot(x)^2 .</div></blockquote>
<p>We see that the basal rate of promoter activation (no bound proteins) is 0.01, and that the rate increases with the square of the number of bound proteins. Here, &#8216;x&#8217; is a reference to the molecule or complex over which the observable DNA_Prot is to be calculated. Thus, DNA_activation is a local function. In the reaction rules block we then define the rule for promoter activation/deactivation as</p>
<blockquote>
<div>%c:DNA(promoter~0) &lt;-&gt; %c:DNA(promoter~1) DNA_activation(c), k_deact .</div></blockquote>
<p>Here, we use the &#8220;prefix&#8221; tagging notation, i.e., the &#8220;%&#8221; character followed by a string label (&#8220;c&#8221; in this case) and then a colon. This indicates that the tag &#8216;c&#8217; references the complex to which the proceeding pattern is matched (as opposed to the DNA molecule; for a general discussion of tags in BNGL see BNGManual:Tags). Note that the rate for reactions generated from this rule will equal DNA_activation multiplied by the population (concentration) of the reactant species (since there is only a single DNA molecule in this case, that value will be either 0 or 1 for stochastic simulations and between 0 and 1 for ODE simulations). In other words, the function DNA_activation acts as an effective single-site rate constant (see Note 21).</p>
<p>An example of a global function can be found in the definition of the mRNA transcription rule,</p>
<blockquote>
<div>0 -&gt; mRNA() mRNA_synth() ,</div></blockquote>
<p>where &#8220;0&#8221; is the null symbol (see Note 49), mRNA_synth() is defined in the functions block as</p>
<blockquote>
<div>mRNA_synth() = v0*DNA_Active ,</div></blockquote>
<p>and DNA_Active is defined in the observables block as</p>
<blockquote>
<div>Molecules DNA_Active DNA(promoter~1) .</div></blockquote>
<p>This rule states that the rate of mRNA transcription is proportional to the number of active promoters, quantified through the observable DNA_Active. Note that the rule could have been written in a more verbose, but equivalent, fashion without using functions as DNA(promoter~1) -&gt; DNA(promoter~1) + mRNA() v0 .</p>
<p>It is important to recognize the distinction between mRNA_synth as a global function and DNA_activation as a local function. mRNA transcription is a global process in that it depends simply on the number of activated promoters. If we were to add an additional gene, say on a plasmid, then the rate of transcription would double if both were active. However, the rate of activation of a promoter depends on the number of proteins bound to the specific gene. Adding a second gene does not directly affect the rate of activation of the promoter on the first gene, i.e., promoter activation is a local process.</p>
<p>Finally, the model also illustrates an &#8220;inline&#8221; function definition in the reaction rules block,</p>
<blockquote>
<div>0 -&gt; Protein(dna) v1*mRNA_Total   # Prot_synth() ,</div></blockquote>
<p>where the observable mRNA_Total is defined in the observables block as</p>
<blockquote>
<div>Molecules mRNA_Total mRNA() .</div></blockquote>
<p>Note the commented out call to the global function Prot_synth() defined as v1*mRNA_Total in the functions block. This is to illustrate that users are free to define functions (global and local) in either, or both, of the functions and reaction rules blocks based on convenience.</p>
<p>NOTE: Inline local functions are not currently supported in NFsim (v1.11).</p>
</div>


    </div>
  </div>
</div>
<footer class="footer">
  <div class="row">
    <div class="span12">
      <p><small>
      &copy; Copyright 2010-2017, University of Pittsburgh.
      Last updated on Dec 07, 2017.
      Created using <a href="http://sphinx-doc.org">Sphinx</a> 1.3.5.
      </small></p>
    </div>
  </div>
  </div>
</footer>
<div id="codemodal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Code Snippets</h3>
  </div>
  <div class="modal-body">
    <textarea id="codesnippets"></textarea>
  </div>
  <div class="modal-footer">
    <button class="btn btn-info" id="selectcode">Select Code</button>
    <!--
    <button class="btn btn-success" id="copycode" data-clipboard-target="codesnippets">Copy Code</button>
    -->
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
  <input type="hidden" id="zeroclipboardpath" value="../../_static/js/zeroclipboard.swf">
</div>
  </body>
</html>